<!DOCTYPE html>
<html id="home" lang="en">
    <head>
        <title>Share screen and audio/video from single peer connection!</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <script src="https://www.webrtc-experiment.com/RTCPeerConnection-v1.5.js"></script>
        <style>
            body {
                background: rgb(50, 49, 49);
            }
            .videos-container {
                background: white;
                border: 2px solid black;
                border-radius: 0.2em;
                display: inline-block;
                margin: 2em .2em;
                padding: .1em;
                vertical-align: top;
            }

            .videos-container h2 {
                border: 0;
                border-top: 1px solid black;
                display: block;
                margin: 0;
                text-align: center;
            }

            video {
                background: black;
                height: 15em;
                width: 20em;
            }

            pre {
                border-left: 2px solid red;
                margin-left: 2em;
                padding-left: 1em;
            }

        </style>
        <body>
 

  <div class="videos-container">
      <video id="video-stream" autoplay controls></video>
      <h2>video-stream</h2>

  </div>
  <div class="videos-container">
      <video id="screen-stream" autoplay controls></video>
      <h2>screen-stream</h2>

  </div>
</div>
<script>
  var peer = RTCPeerConnection(configuration);

  var configuration = {
    attachStream: MediaStream,
    attachStreams: [MediaStream_1, MediaStream_2, MediaStream_3],
	
    offerSDP: offerSDP_sent_from_offerer,

    onICE: function (candidate) {},
    onRemoteStream: function (stream) {},
    onRemoteStreamEnded: function (stream) {},

    onOfferSDP: function (offerSDP) {},
    onAnswerSDP: function (answerSDP) {},

    onChannelMessage: function (event) {},
    onChannelOpened: function (_RTCDataChannel) {}
};

var configuration = {
  attachStream: MediaStream
};

var configuration = {
  attachStreams: [screenStream, audioStream, videoStream]
};

configuration.offerSDP = offerSDP_sent_by_offerer;

function (remoteMediaStream) {
  if(moz) remoteVideo.mozSrcObject = remoteMediaStream;
  if(!moz) remoteVideo.src = window.webkitURL.createObjectURL(remoteMediaStream);
}

onRemoteStreamEnded: function (remoteMediaStream) {
  var video = document.getElementById(remoteMediaStream.id);
  if(video) video.parentNode.removeChild(video);
}

onOfferSDP: function (offerSDP) {
  offerSDP.type === 'offer'
   offerSDP.sdp
  jSON.stringify(offerSDP)
}

onAnswerSDP: function (answerSDP) {
  answerSDP.type === 'answer'
  answerSDP.sdp
  jSON.stringify(answerSDP)
}
onChannelMessage: function (event) {
  event.data
  JSON.parse(event.data)
}

onChannelOpened: function (channel) {
  channel.send('hi there, data ports are ready to transfer data');
}
peer.sendData('hi there, I am a text message');

/* to send an object */
var object = {
    number: 0123456789,
    string: 'just a string',
    object: {},
    array: [],
    _function: function() {}
};

peer.channel.send(hi there, I am a text message');
var stringified = JSON.stringify(object);
peer.sendData(stringified);


var configuration = {
  onChannelClosed: function (event) {},
  onChannelError: function (event) {}
};

getUserMedia(mediaConfiguration);

var mediaConfiguration = {
  video: HTMLAudioElement || HTMLVideoElement,
  constraints: {},
  onsuccess: function (localMediaStream) {},
  onerror: function (event) {}
};
var screen_constraints = {
  mandatory: {
      chromeMediaSource: 'screen'
  },
  optional: []
};

var mediaConfiguration = {
  constraints: {
      audio: false, /* MUST be false! */
      video: screen_constraints
  }
};

var STUN = {
  iceServers: [{
      url: !moz ? 'stun:stun.l.google.com:19302' : 'stun:23.21.150.121'
  }]
};

<canvas></canvas>

</script>
    </body>


</html>